<!DOCTYPE html>

<title>Custom Media Element</title>
<meta name="viewport" content="width=device-width">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css">
<script type="module" src="https://cdn.jsdelivr.net/npm/media-chrome@1/+esm"></script>
<script type="module" src="./example.js"></script>

<style>
  .red-container {
    background-color: red;
  }

  media-controller {
    display: block;
    max-width: 600px;
    /* Test with a fixed height to see overflow compared to native video. */
    /* height: 300px; */
  }

  my-video {
    display: block;
  }
</style>

<h1>&lt;my-video&gt; + media-chrome w/ aspect-ratio</h1>

<div class="red-container">
  <media-controller style="aspect-ratio: 16 / 9;">
    <my-video
      slot="media"
      src="http://stream.mux.com/O6LdRc0112FEJXH00bGsN9Q31yu5EIVHTgjTKRkKtEq1k/low.mp4"
      crossorigin
      muted
    >
      <track default label="English" kind="captions" srclang="en" src="./en-cc.vtt">
      <track label="thumbnails" id="customTrack" default kind="metadata" src="https://image.mux.com/DS00Spx1CV902MCtPj5WknGlR102V5HFkDe/storyboard.vtt">
    </my-video>
    <media-control-bar>
      <media-play-button></media-play-button>
      <media-mute-button></media-mute-button>
      <media-volume-range></media-volume-range>
      <media-time-range></media-time-range>
      <media-pip-button></media-pip-button>
      <media-fullscreen-button></media-fullscreen-button>
    </media-control-bar>
  </media-controller>
</div>

<br>
<h1>&lt;video&gt; + media-chrome w/ aspect-ratio</h1>

<div class="red-container">
  <media-controller style="aspect-ratio: 16 / 9;">
    <video
      slot="media"
      src="http://stream.mux.com/O6LdRc0112FEJXH00bGsN9Q31yu5EIVHTgjTKRkKtEq1k/low.mp4"
      crossorigin
      muted
    >
      <track default label="English" kind="captions" srclang="en" src="./en-cc.vtt">
      <track label="thumbnails" id="customTrack" default kind="metadata" src="https://image.mux.com/DS00Spx1CV902MCtPj5WknGlR102V5HFkDe/storyboard.vtt">
    </video>
    <media-control-bar>
      <media-play-button></media-play-button>
      <media-mute-button></media-mute-button>
      <media-volume-range></media-volume-range>
      <media-time-range></media-time-range>
      <media-pip-button></media-pip-button>
      <media-fullscreen-button></media-fullscreen-button>
    </media-control-bar>
  </media-controller>
</div>

<br>
<h1>&lt;my-video&gt; + media-chrome w/o aspect-ratio</h1>

<div class="red-container">
  <media-controller>
    <my-video
      slot="media"
      src="http://stream.mux.com/O6LdRc0112FEJXH00bGsN9Q31yu5EIVHTgjTKRkKtEq1k/low.mp4"
      crossorigin
      muted
    >
      <track default label="English" kind="captions" srclang="en" src="./en-cc.vtt">
      <track label="thumbnails" id="customTrack" default kind="metadata" src="https://image.mux.com/DS00Spx1CV902MCtPj5WknGlR102V5HFkDe/storyboard.vtt">
    </my-video>
    <media-control-bar>
      <media-play-button></media-play-button>
      <media-mute-button></media-mute-button>
      <media-volume-range></media-volume-range>
      <media-time-range></media-time-range>
      <media-pip-button></media-pip-button>
      <media-fullscreen-button></media-fullscreen-button>
    </media-control-bar>
  </media-controller>
</div>

<br>
<h1>&lt;video&gt; + media-chrome w/o aspect-ratio</h1>

<div class="red-container">
  <media-controller>
    <video
      slot="media"
      src="http://stream.mux.com/O6LdRc0112FEJXH00bGsN9Q31yu5EIVHTgjTKRkKtEq1k/low.mp4"
      crossorigin
      muted
    >
      <track default label="English" kind="captions" srclang="en" src="./en-cc.vtt">
      <track label="thumbnails" id="customTrack" default kind="metadata" src="https://image.mux.com/DS00Spx1CV902MCtPj5WknGlR102V5HFkDe/storyboard.vtt">
    </video>
    <media-control-bar>
      <media-play-button></media-play-button>
      <media-mute-button></media-mute-button>
      <media-volume-range></media-volume-range>
      <media-time-range></media-time-range>
      <media-pip-button></media-pip-button>
      <media-fullscreen-button></media-fullscreen-button>
    </media-control-bar>
  </media-controller>
</div>

<br>
<br>

<script>
  const video = document.querySelector('my-video');

  video.addEventListener('emptied', (e) => {
    console.log(e.type);
  });

  video.addEventListener('loadstart', (e) => {
    console.log(e.type);
  });

  video.addEventListener('loadedmetadata', (e) => {
    console.log(e.type);
  });

  video.addEventListener('loadeddata', (e) => {
    console.log(e.type);
  });

  video.addEventListener('play', (e) => {
    console.log(e.type);
  });

  video.addEventListener('waiting', (e) => {
    console.log(e.type);
  });

  video.addEventListener('playing', (e) => {
    console.log(e.type);
  });

  video.addEventListener('pause', (e) => {
    console.log(e.type);
  });

  video.addEventListener('seeking', (e) => {
    console.log(e.type);
  });

  video.addEventListener('seeked', (e) => {
    console.log(e.type);
  });

  video.addEventListener('ended', (e) => {
    console.log(e.type);
  });

  video.addEventListener('durationchange', (e) => {
    console.log(e.type, video.duration);
  });

  video.addEventListener('volumechange', (e) => {
    console.log(e.type, video.volume);
  });

  video.addEventListener('resize', (e) => {
    console.log(e.type, video.videoWidth, video.videoHeight);
  });
</script>
